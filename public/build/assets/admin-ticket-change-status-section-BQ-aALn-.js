import{r as n,u,s as p,j as a}from"./app-DPOd3A5a.js";import{u as _}from"./tickets-thunk-CHbkn5RH.js";import{g as S}from"./it-thunk-CsZOHIpC.js";import{s as T}from"./index-DAU_Rsye.js";import{B as v}from"./index-R-UFoNHE.js";import{M as C}from"./index-BKRSm0vV.js";import{S as m,I as w}from"./index-kSbFHtVS.js";import"./ticket-service-Dv5D2mh_.js";import"./index-BzjZ0zPs.js";import"./EyeOutlined-C3PrQK6D.js";const{TextArea:j}=w;function R(){var r,d;const[f,l]=n.useState(!1),[c,g]=T.useMessage(),{users:o}=u(e=>e.it),{user:s}=u(e=>e.app);console.log("useruser",s);const[t,i]=n.useState({status:"Close ticket",user_id:s==null?void 0:s.id,ticket_id:window.location.pathname.split("/")[3],assigned_to:(r=o[0])==null?void 0:r.id});n.useEffect(()=>{var e;i({...t,user_id:s==null?void 0:s.id,assigned_to:(e=o[0])==null?void 0:e.id})},[t.status]),n.useEffect(()=>{p.dispatch(S(2))},[]);const k=()=>{l(!0)};async function h(e){t.notes?(await p.dispatch(_(t)),i({status:"Close ticket",ticket_id:window.location.pathname.split("/")[3],assigned_to:o[0]}),c.success("Updated Success!"),l(!1)):c.error("Notes is required!")}const x=()=>{l(!1)};return console.log("data",t),a.jsxs("div",{children:[g,a.jsx(v,{size:"large",type:"primary",onClick:k,children:"Update Ticket Status"}),a.jsx(C,{title:"Update Ticket Status",open:f,onOk:h,okText:"Submit",onCancel:x,children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsx(m,{size:"large",value:t.status,className:"w-full",onChange:e=>i({...t,status:e}),options:[{value:"Assigned",label:"Assigned"},{value:"Close ticket",label:"Close Ticket"},{value:"Transfer Ticket",label:"Transfer Ticket"},{value:"Declined Ticket",label:"Declined Ticket"}]}),t.status=="Assigned"&&a.jsx(m,{size:"large",value:t.assigned_to,className:"w-full",onChange:e=>i({...t,assigned_to:e}),options:(d=o==null?void 0:o.data)==null?void 0:d.map(e=>({value:e.id,label:e.name}))}),a.jsx(j,{value:t.notes??"",onChange:e=>i({...t,notes:e.target.value}),placeholder:"Notes",autoSize:{minRows:3,maxRows:5}})]})})]})}export{R as default};
