import{u as m,r as j,j as t,y as d}from"./app-B9SUbSwL.js";import{h as b}from"./moment-C5S46NFB.js";import{T as k}from"./table-C812ILMG.js";import{P as N}from"./pagination-54xNDEn9.js";import{F as v,R as F,a as R}from"./FieldTimeOutlined-CMyXh9kS.js";import{F as _}from"./XMarkIcon-CpHMlC6n.js";import{F as C}from"./ExclamationTriangleIcon-CkoXv_4f.js";import{F as P}from"./TicketIcon-D6c8Hb1J.js";import{S}from"./index-V0xvCl_G.js";import"./AntdIcon-DxF_eBZZ.js";import"./index-Ce3OgiKg.js";import"./compact-item-ngQTwuTc.js";import"./motion-BhzBhWIN.js";import"./CheckOutlined-DBPTmsPs.js";import"./useIcons-Dr7fIjf4.js";import"./PurePanel-DH0804kL.js";function M(){var o;const{tickets:s}=m(e=>e.tickets),{categories:a}=m(e=>e.category),[x,u]=j.useState([]),g=new URL(window.location.href),i=new URLSearchParams(g.search),p=i.get("page"),n=i.get("category");function f(e){d.visit("?page="+p+"&category="+(e||"null"))}const h=(o=a==null?void 0:a.data)==null?void 0:o.map(e=>({label:e.name,value:e.value}));console.log("categories",a==null?void 0:a.data);const y=[{title:"Name of Requestor",key:"name"},{title:"Ticket No.",key:"ticket_id"},{title:"Assigned I.T Personnel",key:"assigned_to"},{title:"Status",key:"status"},{title:"Date Filed",key:"created_at"},{title:t.jsx("div",{className:"flex gap-3 items-center justify-center",children:t.jsx(S,{allowClear:!0,className:"w-32 mr-4",showSearch:!0,placeholder:"Category",optionFilterProp:"label",value:n=="null"?null:n,onChange:f,options:h})}),key:"category_id"},{title:"Action",key:"action"}],w=s==null?void 0:s.data.map(e=>{var r,l,c;return{...e,name:((r=e==null?void 0:e.user)==null?void 0:r.name)??"",assigned_to:((l=e==null?void 0:e.assigned_to)==null?void 0:l.name)??"",category_id:((c=e==null?void 0:e.category)==null?void 0:c.name)??"",created_at:b(e.created_at).format("LLL"),status:t.jsxs(t.Fragment,{children:[e.status==="Assigned"&&t.jsxs("div",{className:"bg-blue-600 text-white text-xs font-medium inline-flex items-center px-2.5 py-0.5 rounded me-2 border-gray-500",children:[t.jsx(v,{className:"w-4 h-4"})," Assigned"]}),e.status==="Pending"&&t.jsxs("div",{className:"bg-yellow-600 text-white text-xs font-medium inline-flex items-center px-2.5 py-0.5 rounded me-2 border-gray-500",children:[t.jsx(F,{})," Pending"]}),e.status==="Closed"&&t.jsxs("div",{className:"bg-green-600 text-white text-xs font-medium inline-flex items-center px-2.5 py-0.5 rounded me-2 border-gray-500",children:[t.jsx(R,{className:"w-4 h-4"})," Closed"]}),e.status==="Declined"&&t.jsxs("div",{className:"bg-red-600 text-white text-xs font-medium inline-flex items-center px-2.5 py-0.5 rounded me-2 border-gray-500",children:[t.jsx(_,{className:"w-4 h-4"})," Declined"]}),e.isUrgent==="true"&&t.jsxs("div",{className:"bg-red-600 text-white text-xs font-medium inline-flex items-center px-2.5 py-0.5 rounded me-2 border border-transparent animate-border-glow",children:[t.jsx(C,{className:"w-4 h-4 mr-1"}),"Urgent"]})]}),action:t.jsx("div",{className:"flex gap-4",children:t.jsxs("button",{onClick:()=>d.visit("/admin/tickets/"+e.id+"/details"),type:"button",class:"text-white bg-[#2557D6] gap-2 hover:bg-[#2557D6]/90 focus:ring-4 focus:ring-[#2557D6]/50 focus:outline-none font-medium rounded-lg text-sm px-5 py-1.5 text-center inline-flex items-center",children:[t.jsx(P,{className:"size-5 "}),"View Ticket"]})})}});return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex flex-col items-center justify-between h-[85vh] w-full",children:[t.jsx(k,{setDataChecked:u,dataChecked:x,columns:y,data:w,isCheckbox:!0}),t.jsx(N,{data:s})]})})}export{M as default};
