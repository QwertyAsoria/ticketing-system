import{r as n,u,s as p,j as a}from"./app-Bx9m_Czv.js";import{u as k}from"./tickets-thunk-DkEZxlIF.js";import{g as S}from"./it-thunk-BGDWfvgX.js";import{s as C}from"./index-Bx7xNqx-.js";import{B as v}from"./index-Nodq5img.js";import{M as w}from"./index-CJwuiIz9.js";import{S as m,I as j}from"./index-DclHcJBt.js";import"./ticket-service-BbdHVoCZ.js";import"./index-BY39-JY2.js";import"./EyeOutlined-3Y_RI0Fx.js";const{TextArea:T}=j;function R(){var d,r;const[f,l]=n.useState(!1),[c,g]=C.useMessage(),{users:o}=u(e=>e.it),{user:t}=u(e=>e.app);console.log("useruser",t);const[s,i]=n.useState({status:"Closed",user_id:t==null?void 0:t.id,ticket_id:window.location.pathname.split("/")[3],assigned_to:(d=o[0])==null?void 0:d.id});n.useEffect(()=>{var e;i({...s,user_id:t==null?void 0:t.id,assigned_to:(e=o[0])==null?void 0:e.id})},[s.status]),n.useEffect(()=>{p.dispatch(S(2))},[]);const h=()=>{l(!0)};async function x(e){s.notes?(await p.dispatch(k(s)),i({status:"Closed",ticket_id:window.location.pathname.split("/")[3],assigned_to:o[0]}),c.success("Updated Success!"),l(!1)):c.error("Notes is required!")}const _=()=>{l(!1)};return console.log("data",s),a.jsxs("div",{children:[g,a.jsx(v,{size:"large",type:"primary",onClick:h,children:"Update Ticket Status"}),a.jsx(w,{title:"Update Ticket Status",open:f,onOk:x,okText:"Submit",onCancel:_,children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsx(m,{size:"large",value:s.status,className:"w-full",onChange:e=>i({...s,status:e}),options:[{value:"Closed",label:"Closed Ticket"},{value:"Assigned",label:"Transfer Ticket"},{value:"Declined",label:"Declined Ticket"}]}),s.status=="Assigned"&&a.jsx(m,{size:"large",value:s.assigned_to,className:"w-full",onChange:e=>i({...s,assigned_to:e}),options:(r=o==null?void 0:o.data)==null?void 0:r.map(e=>({value:e.id,label:e.name}))}),a.jsx(T,{value:s.notes??"",onChange:e=>i({...s,notes:e.target.value}),placeholder:"Notes",autoSize:{minRows:3,maxRows:5}})]})})]})}export{R as default};
