import{r as k,R as f,u as L,s as z,j as a}from"./app-CudlOiIy.js";import A from"./dashboard-card-section-CwBQBlcM.js";import B from"./dashboard-line-chart-section-B4TqGLPM.js";import{F as M,D as $}from"./dashboard-it-filtering-section-CGe9DEJC.js";import{a as p}from"./category-thunk-BBVUKa80.js";import V from"./category-chart-section-CRfhkYG8.js";import{F as P}from"./TicketIcon-CiMGARjT.js";import"./it-daily-filtering-chart-section-DHmUqtZ_.js";import"./it-monthly-filtering-chart-section-C31yddMI.js";import"./it-weekly-filtering-chart-section copy-DDOx-XoB.js";function b(n){return n*Math.PI/180}function O(n,t,e){return n>e?e:n<t?t:n}function T(n,t){return t/100*n}function W(n,t){return n+t/2}function E(n,t){var e=b(n);return{dx:t*Math.cos(e),dy:t*Math.sin(e)}}function R(n){return typeof n=="number"}function C(n,t){return typeof n=="function"?n(t):n}function U(n,t){var e=Object.assign({},t,n);for(var i in t)n[i]===void 0&&(e[i]=t[i]);return e}function G(n){for(var t=0,e=0;e<n.length;e++)t+=n[e].value;return t}function H(n){for(var t=n.data,e=n.lengthAngle,i=n.totalValue,l=n.paddingAngle,r=n.startAngle,o=i||G(t),m=O(e,-360,360),s=Math.abs(m)===360?t.length:t.length-1,c=Math.abs(l)*Math.sign(e),d=c*s,u=m-d,g=0,j=[],v=0;v<t.length;v++){var y=t[v],N=o===0?0:y.value/o*100,S=T(u,N),h=g+r;g=g+S+c,j.push(Object.assign({percentage:N,startAngle:h,degrees:S},y))}return j}function F(n,t){if(n==null)return{};var e={},i=Object.keys(n),l,r;for(r=0;r<i.length;r++)l=i[r],!(t.indexOf(l)>=0)&&(e[l]=n[l]);return e}function K(n){var t=n.renderLabel,e=n.labelProps,i=t(e);if(typeof i=="string"||typeof i=="number"){e.dataEntry,e.dataIndex;var l=F(e,["dataEntry","dataIndex"]);return f.createElement("text",Object.assign({dominantBaseline:"central"},l),i)}return f.isValidElement(i)?i:null}function q(n){var t=1e14;return Math.round((n+Number.EPSILON)*t)/t}function J(n){var t=n.labelPosition,e=n.lineWidth,i=n.labelHorizontalShift,l=q(i);if(l===0)return"middle";if(t>100)return l>0?"start":"end";var r=100-e;return t<r?l>0?"end":"start":"middle"}function X(n,t){return n.map(function(e,i){var l,r=(l=C(t.segmentsShift,i))!=null?l:0,o=T(t.radius,t.labelPosition)+r,m=E(W(e.startAngle,e.degrees),o),s=m.dx,c=m.dy,d={x:t.center[0],y:t.center[1],dx:s,dy:c,textAnchor:J({labelPosition:t.labelPosition,lineWidth:t.lineWidth,labelHorizontalShift:s}),dataEntry:e,dataIndex:i,style:C(t.labelStyle,i)};return d})}function Y(n,t){var e=t.label;if(e)return X(n,t).map(function(i,l){return f.createElement(K,{key:"label-"+(i.dataEntry.key||l),renderLabel:e,labelProps:i})})}var Q=function(t,e,i,l,r){var o=r-l;if(o===0)return[];var m=i*Math.cos(l)+t,s=i*Math.sin(l)+e,c=i*Math.cos(r)+t,d=i*Math.sin(r)+e,u=Math.abs(o)<=Math.PI?"0":"1",g=o<0?"0":"1";return[["M",m,s],["A",i,i,0,u,g,c,d]]},Z=Q,_=Z;function ee(n,t,e,i,l){var r=O(i,-359.999,359.999);return _(n,t,l,b(e),b(e+r)).map(function(o){return o.join(" ")}).join(" ")}function w(n){var t=n.cx,e=n.cy,i=n.lengthAngle,l=n.lineWidth,r=n.radius,o=n.shift,m=o===void 0?0:o,s=n.reveal,c=n.rounded,d=n.startAngle,u=n.title,g=F(n,["cx","cy","lengthAngle","lineWidth","radius","shift","reveal","rounded","startAngle","title"]),j=r-l/2,v=E(W(d,i),m),y=v.dx,N=v.dy,S=ee(t+y,e+N,d,i,j),h,D;if(R(s)){var I=b(j)*i;h=Math.abs(I),D=h-T(h,s)}return f.createElement("path",Object.assign({d:S,fill:"none",strokeWidth:l,strokeDasharray:h,strokeDashoffset:D,strokeLinecap:c?"round":void 0},g),u&&f.createElement("title",null,u))}function te(n,t,e){var i="stroke-dashoffset "+n+"ms "+t;return e&&e.transition&&(i=i+","+e.transition),{transition:i}}function ne(n){return n.animate&&!R(n.reveal)?100:n.reveal}function x(n,t){return n&&function(e){n(e,t)}}function ae(n,t,e){var i=e??ne(t),l=t.radius,r=t.center,o=r[0],m=r[1],s=T(l,t.lineWidth),c=n.map(function(d,u){var g=C(t.segmentsStyle,u);return f.createElement(w,{cx:o,cy:m,key:d.key||u,lengthAngle:d.degrees,lineWidth:s,radius:l,rounded:t.rounded,reveal:i,shift:C(t.segmentsShift,u),startAngle:d.startAngle,title:d.title,style:Object.assign({},g,t.animate&&te(t.animationDuration,t.animationEasing,g)),stroke:d.color,tabIndex:t.segmentsTabIndex,onBlur:x(t.onBlur,u),onClick:x(t.onClick,u),onFocus:x(t.onFocus,u),onKeyDown:x(t.onKeyDown,u),onMouseOver:x(t.onMouseOver,u),onMouseOut:x(t.onMouseOut,u)})});return t.background&&c.unshift(f.createElement(w,{cx:o,cy:m,key:"bg",lengthAngle:t.lengthAngle,lineWidth:s,radius:l,rounded:t.rounded,startAngle:t.startAngle,stroke:t.background})),c}var ie={animationDuration:500,animationEasing:"ease-out",center:[50,50],data:[],labelPosition:50,lengthAngle:360,lineWidth:100,paddingAngle:0,radius:50,startAngle:0,viewBoxSize:[100,100]};function le(n){var t=U(n,ie),e=k.useState(t.animate?0:null),i=e[0],l=e[1];k.useEffect(function(){t.animate&&l(null)},[]);var r=H(t);return f.createElement("svg",{viewBox:"0 0 "+t.viewBoxSize[0]+" "+t.viewBoxSize[1],width:"100%",height:"100%",className:t.className,style:t.style},ae(r,t,i),Y(r,t),t.children)}function he(){var m;const[n,t]=k.useState(null),{dashboard:e}=L(s=>s.admin),i=(s,c,d)=>{console.log("Clicked segment:",c)},[l,r]=k.useState(null),o=s=>{const c=JSON.parse(s);r(c)};return k.useEffect(()=>{z.dispatch(p())},[]),console.log("dashboardss",e==null?void 0:e.pending),a.jsxs("div",{className:"flex flex-col gap-8",children:[a.jsxs("div",{className:"flex flex-wrap gap-7 rounded-md",children:[a.jsx(A,{icon:a.jsx(P,{className:"h-12 text-white"}),title:`Pending Tickets: ${(e==null?void 0:e.pending)??0}`,href:"Go To Pending Tickets Section",link:"/admin/tickets?page=1&search=Pending"}),a.jsx(A,{icon:a.jsx(P,{className:"h-12 text-white"}),title:`Urgent Tickets: ${(e==null?void 0:e.urgent)??0}`,href:"Go To Urgent Tickets Section",link:"/admin/tickets?page=1&search=isUrgent"}),a.jsx(A,{icon:a.jsx(P,{className:"h-12 text-white"}),title:`Ongoing Tickets: ${(e==null?void 0:e.ongoing)??0}`,href:"Go To Ongoing Tickets Section",link:"/admin/tickets?page=1&search=Ongoing"}),a.jsx(A,{icon:a.jsx(P,{className:"h-12 text-white"}),title:`Closed Tickets: ${(e==null?void 0:e.closed)??0}`,href:"Go To Closed Tickets Section",link:"/admin/tickets?page=1&search=Closed"})]}),a.jsxs("div",{children:[a.jsx("center",{children:a.jsxs("div",{className:"flex flex-1 gap-9 ",children:[a.jsxs("div",{className:" p-3 rounded-lg w-full shadow-2xl",children:[a.jsxs("div",{className:"flex text-3xl font-bold mb-3 p-3",children:[a.jsx(M,{className:"size-10"}),"Tickets Status Inquiry Chart"]}),a.jsxs("div",{className:"flex w-full items-start justify-center",children:[a.jsxs("div",{className:"flex flex-1 flex-col gap-0.5 text-md",children:[a.jsxs("div",{className:"flex items-center text-yellow-400",children:[a.jsx("div",{className:"ml-1",children:"Pending:"}),a.jsx("div",{className:"ml-1 text-md",children:(e==null?void 0:e.pending)??0})]}),a.jsxs("div",{className:"flex text-[#e86100] items-center",children:[a.jsx("div",{className:"ml-1",children:"Urgent:"}),a.jsx("div",{className:"ml-1 text-md",children:(e==null?void 0:e.urgent)??0})]}),a.jsxs("div",{className:"flex text-blue-400 items-center",children:[a.jsx("div",{className:"ml-1",children:"Assigned:"}),a.jsx("div",{className:"ml-1 text-md",children:(e==null?void 0:e.assigned)??0})]})]}),a.jsxs("div",{className:"flex flex-1 flex-col gap-0.5 text-md",children:[a.jsxs("div",{className:"flex text-green-600 items-center",children:[a.jsx("div",{className:"ml-1",children:"Closed:"}),a.jsx("div",{className:"ml-1 text-md",children:(e==null?void 0:e.closed)??0})]}),a.jsxs("div",{className:"flex text-[#ff0000] items-center",children:[a.jsx("div",{className:"ml-1",children:"Declined:"}),a.jsx("div",{className:" ml-1 text-md",children:(e==null?void 0:e.declined)??0})]})]})]}),a.jsxs("div",{className:"mb-2 mt-3 flex flex-1 justify-start items-start",children:["Total Tickets:",(e==null?void 0:e.total)??0]}),a.jsx(le,{style:{height:"300px"},lineWidth:55,animate:!0,animationDuration:1e3,label:({dataEntry:s})=>`${Math.round(s.percentage)}%`,labelStyle:s=>({fill:"black",fontSize:"7px",fontFamily:"sans-serif",transform:s===n?"scale(1.1)":"scale(1)",transition:"transform 0.3s"}),labelPosition:74,paddingAngle:1.8,onMouseOver:(s,c,d)=>{t(c)},onMouseOut:()=>{t(null)},onClick:(s,c,d)=>{i(s,c)},data:[{title:"Urgent",value:(e==null?void 0:e.urgent)??0,color:"#e86100"},{title:"Closed",value:(e==null?void 0:e.closed)??0,color:"#009e60"},{title:"Assigned",value:(e==null?void 0:e.assigned)??0,color:"#4299E1"},{title:"Pending",value:(e==null?void 0:e.pending)??0,color:"#FFFF00"},{title:"Declined",value:(e==null?void 0:e.declined)??0,color:"#ff0000"}].filter(s=>s.value>0),segmentsStyle:s=>({transition:"transform 0.3s",transform:s===n?"scale(1.1)":"scale(1)"})})]}),a.jsx("div",{className:"w-full",children:a.jsx(V,{})})]})}),a.jsxs("div",{className:"mb-10",children:[a.jsxs("div",{className:"flex text-3xl items-center justify-center text-gray-900 font-bold mb-3 mt-6 p-3",children:[a.jsx(M,{className:"size-10"}),"IT Personnel Tickets Data Inquiry"]}),a.jsxs("select",{className:"w-full flex items-center justify-center ",onChange:s=>o(s.target.value),children:[a.jsx("option",{children:"Select an IT Personnel"}),(m=e==null?void 0:e.data)==null?void 0:m.map((s,c)=>a.jsx("option",{value:JSON.stringify(s),children:s==null?void 0:s.name},c))]}),a.jsx("div",{children:l&&a.jsxs(a.Fragment,{children:[a.jsx(B,{data:l}),a.jsx($,{data:l})]})})]})]})]})}export{he as default};
